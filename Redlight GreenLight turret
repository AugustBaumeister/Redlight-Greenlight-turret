#pragma region Libraries and stuff
#include <Servo.h>

const int greenLEDPin = 10;
const int redLEDPin = 9;
const int motionSensorPin = 4;
const int rollServoPin = 5;

const int rollSpeed = 0;          
const int stopPosition = 90;      
const int rollDuration = 5000;    
const int motionCheckDuration = 10000; 

Servo rollServo;
#pragma endregion Libraries and stuff

void setup() {
  Serial.begin(9600);

  pinMode(greenLEDPin, OUTPUT);
  pinMode(redLEDPin, OUTPUT);
  pinMode(motionSensorPin, INPUT);

  rollServo.attach(rollServoPin);
  rollServo.write(stopPosition); 

  
  digitalWrite(greenLEDPin, HIGH);
  digitalWrite(redLEDPin, LOW);
Serial.println("Game Start: GREEN LIGHT - You can move");
}

void loop() {
  
  delay(5000); 

  
  digitalWrite(greenLEDPin, LOW);
  digitalWrite(redLEDPin, HIGH);
  Serial.println("RED LIGHT - Motion detection active");

  unsigned long startTime = millis();
  bool motionDetected = false;

  
  while (millis() - startTime < motionCheckDuration) {
    if (digitalRead(motionSensorPin) == HIGH) {
      Serial.println("MOTION DETECTED DURING RED LIGHT - Firing roll servo!");
      fireRollServo();
motionDetected = true;
      break;
    }
    delay(50); 
  }

  if (!motionDetected) {
    Serial.println("No motion detected - back to GREEN LIGHT");
    digitalWrite(redLEDPin, LOW);
    digitalWrite(greenLEDPin, HIGH);
  } else {
    Serial.println("Game Over - Press RESET to restart");
    while (true); 
  }
}
#pragma region Roll servo firing 
void fireRollServo() {
  rollServo.write(rollSpeed); 
  delay(rollDuration);
  rollServo.write(stopPosition); 
}
#pragma endregion Roll servo firing

//END OF CODE

